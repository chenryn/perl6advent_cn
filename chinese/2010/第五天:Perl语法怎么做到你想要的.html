




	<div class="post" id="post-2732">


		<h2>2010年Perl6圣诞月历(五)perl语法怎样做到你想做的</h2>


		<div class="info">


			<span class="date">2011年12月13日</span>


			<span class="author"><a href="http://chenlinux.com/author/admin" title="由 admin 发布" rel="author">admin</a></span>

			

			

				<span class="addcomment"><a href="#respond">发表评论</a></span>


				<span class="comments"><a href="#comments">阅读评论</a></span>


			

			<div class="fixed"></div>


		</div>


		<div class="content">


			<p>圣临月第五天，您或许有些失望没能看到Perl6酷呆了的新玩法~这次会是直观的解释一些编程语言的运行原理。<br />
作为样例，先说下面这两行吧：</p>

<div class="wp_syntax"><div class="code"><pre class="perl" style="font-family:monospace;">  say <span style="color: #cc66cc;">6</span> <span style="color: #339933;">/</span> <span style="color: #cc66cc;">3</span><span style="color: #339933;">;</span>
    say <span style="color: #ff0000;">'Price: 15 Euro'</span> <span style="color: #339933;">~~</span> <span style="color: #009966; font-style: italic;">/\d+/</span><span style="color: #339933;">;</span></pre></div></div>

<p>嗯，两行代码的运行结果分别是2和15。相信这对perl程序员来说没什么可奇怪的。但你再细看看，两行都有斜杠/，却为了完全不一样的目的，第一个是数值运算，第二个是正则匹配。<br />
Perl怎么知道一个/号意味着什么？这当然不是简单的看/号后面的文本来决定，因为正则表达式可以看起来跟普通代码一样。<br />
答案是：Perl会持续跟踪他的预期。Perl预期中最重要的两样东西就是：词和操作符。<br />
一个词可以是像23,或者str这样的文字。当解释器发现这样一个文字，然后后面就会是一个语句的结束（即分号;），或者一个操作符像+/*等等。过了这个操作符，解释器又开始预期下一个词。<br />
其实这就是问题的答案了：当解释器预期为词的时候，斜线/就代表正则表达式的开始；当预期为操作符的时候，斜线/就代表数字的除法运算。<br />
这种做法造成了深远的后果。子函数运行可以不加括号，而在函数名后面，perl预期一个词开端的参数列表。另一方面，类型名必须跟在操作符后面，所以，所有的类型名必须在解析时就是已知的。<br />
这样，很多字符都可以重复使用在不同的语法环境下了。</p>
<div id="downaspdf">
                    <a title="下载此文章的 PDF 文档" href="http://chenlinux.com/wp-content/plugins/down-as-pdf/generate.php?id=2732">
                      <span>Download as PDF</span>
                    </a>
                </div>

			<div class="fixed"></div>


		</div>


		<div class="under">


			<span class="categories">分类: </span><span><a href="http://chenlinux.com/category/ops/script" title="查看 脚本 中的全部文章" rel="category tag">脚本</a></span>

			<span class="tags">标签: </span><span><a href="http://chenlinux.com/tag/perl" rel="tag">perl</a>, <a href="http://chenlinux.com/tag/perl6advent" rel="tag">perl6advent</a></span>

		</div>


	</div>





