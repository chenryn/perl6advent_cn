<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>Day 4 &#8211; The Sequence Operators &laquo; Perl 6 Advent Calendar</title>

<link rel="stylesheet" href="http://s0.wp.com/wp-content/themes/pub/kubrick/style.css?m=1321457826g&amp;3" type="text/css" media="screen" />
<!--[if lte IE 8]><link rel="stylesheet" href="http://s0.wp.com/wp-content/themes/pub/kubrick/ie.css?m=1305292948g" type="text/css" media="screen" /><![endif]-->
<link rel="pingback" href="http://perl6advent.wordpress.com/xmlrpc.php" />

<meta name="google-site-verification" content="YPNxtMSK3Jj7JR2XCK-hDqmF9xDIeBEyvYm3aT1s71Y" />
<link rel="alternate" type="application/rss+xml" title="Perl 6 Advent Calendar &raquo; Feed" href="http://perl6advent.wordpress.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Perl 6 Advent Calendar &raquo; Comments Feed" href="http://perl6advent.wordpress.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Perl 6 Advent Calendar &raquo; Day 4 &#8211; The Sequence&nbsp;Operators Comments Feed" href="http://perl6advent.wordpress.com/2010/12/04/the-sequence-operator/feed/" />
<script type="text/javascript">
/* <![CDATA[ */
function addLoadEvent(func){var oldonload=window.onload;if(typeof window.onload!='function'){window.onload=func;}else{window.onload=function(){oldonload();func();}}}
/* ]]> */
</script>
<link rel="stylesheet" href="http://s0.wp.com/wp-content/themes/h4/global.css?m=1313010128g" type="text/css" />
<link rel='stylesheet' id='loggedout-subscribe-css'  href='http://s2.wp.com/wp-content/blog-plugins/loggedout-follow/widget.css?m=1322602715g&#038;ver=20111128' type='text/css' media='all' />
<link rel='stylesheet' id='post-reactions-css'  href='http://s0.wp.com/wp-content/mu-plugins/post-flair/style.css?m=1322086817g&#038;ver=3' type='text/css' media='all' />
<script type='text/javascript' src='http://s1.wp.com/wp-includes/js/jquery/jquery.js?m=1322588679g&#038;ver=1.7.1'></script>
<script type='text/javascript' src='http://s2.wp.com/wp-content/blog-plugins/loggedout-follow/widget.js?m=1320005313g&#038;ver=20111128'></script>
<script type='text/javascript' src='http://s2.wp.com/wp-includes/js/comment-reply.js?m=1305292932g&#038;ver=20090102'></script>
<link rel='stylesheet' id='highlander-comments-css'  href='http://s2.wp.com/wp-content/mu-plugins/highlander-comments/style.css?m=1323127129g&#038;ver=20110620' type='text/css' media='all' />
<!--[if lt IE 8]>
<link rel='stylesheet' id='highlander-comments-ie7-css'  href='http://s0.wp.com/wp-content/mu-plugins/highlander-comments/style-ie7.css?m=1307172301g&#038;ver=20110606' type='text/css' media='all' />
<![endif]-->
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://perl6advent.wordpress.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://perl6advent.wordpress.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Day 3 &#8211; File&nbsp;operations' href='http://perl6advent.wordpress.com/2010/12/03/day-3-file-operations/' />
<link rel='next' title='Day 5 &#8211; Why Perl syntax does what you&nbsp;want' href='http://perl6advent.wordpress.com/2010/12/05/why-perl-syntax-dwyw/' />
<meta name="generator" content="WordPress.com" />
<link rel='canonical' href='http://perl6advent.wordpress.com/2010/12/04/the-sequence-operator/' />
<link rel='shortlink' href='http://wp.me/pJ3YZ-7m' />
<link rel="alternate" type="application/json+oembed" href="http://public-api.wordpress.com/oembed/1.0/?format=json&url=http%3A%2F%2Fperl6advent.wordpress.com%2F2010%2F12%2F04%2Fthe-sequence-operator%2F&for=wpcom-auto-discovery" /><link rel="alternate" type="application/xml+oembed" href="http://public-api.wordpress.com/oembed/1.0/?format=xml&url=http%3A%2F%2Fperl6advent.wordpress.com%2F2010%2F12%2F04%2Fthe-sequence-operator%2F&for=wpcom-auto-discovery" /><meta property="og:type" content="article" />
<meta property="og:title" content="Day 4 &#8211; The Sequence&nbsp;Operators" />
<meta property="og:url" content="http://perl6advent.wordpress.com/2010/12/04/the-sequence-operator/" />
<meta property="og:description" content="Last year, there was a brief tease of the sequence operator (tweaked slightly to be correct after a year&#039;s worth of changes to the spec):

This now works in Rakudo:

(Note: All the code example..." />
<meta property="og:site_name" content="Perl 6 Advent Calendar" />
<link rel="shortcut icon" type="image/x-icon" href="http://s2.wp.com/i/favicon.ico?m=1311976024g" sizes="16x16 24x24 32x32 48x48" />
<link rel="icon" type="image/x-icon" href="http://s2.wp.com/i/favicon.ico?m=1311976024g" sizes="16x16 24x24 32x32 48x48" />
<link rel="apple-touch-icon-precomposed" href="http://s0.wp.com/i/webclip.png?m=1311618118g" />
<link rel='openid.server' href='http://perl6advent.wordpress.com/?openidserver=1' />
<link rel='openid.delegate' href='http://perl6advent.wordpress.com/' />
<link rel="search" type="application/opensearchdescription+xml" href="http://perl6advent.wordpress.com/osd.xml" title="Perl 6 Advent Calendar" />
<link rel="search" type="application/opensearchdescription+xml" href="http://wordpress.com/opensearch.xml" title="WordPress.com" />
	<style type="text/css">
	/* <![CDATA[ */
			/* ]]> */
	</style>
	<style type="text/css">
#header     { margin: 0 !important; margin: 0 0 0 1px; padding: 1px; height: 198px; width: 758px; }
#headerimg  { margin: 7px 9px 0; height: 192px; width: 740px; }
#headerimg { background: url(http://perl6advent.files.wordpress.com/2009/12/perl6advent2.png) no-repeat top;}
#header h1 a, #header h1 a:hover, #header .description {
	color: #ffffff;
}
</style>
<style type='text/css'><!--
body { background: url("http://s0.wp.com/wp-content/themes/pub/kubrick/images/kubrickbgcolor.gif?m=1305292948g"); }
#page { background: url("http://s0.wp.com/wp-content/themes/pub/kubrick/images/kubrickbgwide.gif?m=1305292948g") repeat-y top !important; border: none; }
#header { background: url("http://s0.wp.com/wp-content/themes/pub/kubrick/images/kubrickheader.gif?m=1305292948g") no-repeat bottom center; }
#footer { background: url("http://s0.wp.com/wp-content/themes/pub/kubrick/images/kubrickfooter.gif?m=1305292948g") no-repeat bottom; border: none;}
#header { margin: 0 !important; margin: 0 0 0 1px; padding: 1px; height: 198px; width: 758px; }
#headerimg { margin: 7px 9px 0; height: 192px; width: 740px; }
#headerimg h1 a, #headerimg h1 a:visited, #headerimg .description { color: #FFFFFF; }
#headerimg h1 a, #headerimg .description { display:  }

	--></style><meta name="application-name" content="Perl 6 Advent Calendar" /><meta name="msapplication-window" content="width=device-width;height=device-height" /><meta name="msapplication-tooltip" content="Something cool about Perl 6 every day" /><meta name="msapplication-task" content="name=Subscribe;action-uri=http://perl6advent.wordpress.com/feed/;icon-uri=http://s2.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=http://s2.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=http://s2.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=http://s2.wp.com/i/favicon.ico" />
<script type='text/javascript' src='http://partner.googleadservices.com/gampad/google_service.js'>
</script>
<script type='text/javascript'>
GS_googleAddAdSenseService("ca-pub-3443918307802676");
GS_googleEnableAllServices();
</script>
<script type='text/javascript'>
GA_googleAddSlot("ca-pub-3443918307802676", "wpcom_sharethrough");
</script>
<script type='text/javascript'>
GA_googleFetchAds();
</script>
<script type="text/javascript"> 
	window.google_analytics_uacct = "UA-52447-2"; 
</script>

<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-52447-2']);
	_gaq.push(['_setDomainName', 'wordpress.com']);
	_gaq.push(['_initData']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
	})();
</script>
</head>
<body class="typekit-enabled highlander-enabled highlander-light">
<div id="page">


<div id="header">
	<div id="headerimg" onclick=" location.href='http://perl6advent.wordpress.com';" style="cursor: pointer;">
		<h1><a href="http://perl6advent.wordpress.com/">Perl 6 Advent Calendar</a></h1>
		<div class="description">Something cool about Perl 6 every day</div>
	</div>
</div>
<hr />

	<div id="content" class="widecolumn">

	
		<div class="navigation">
			<div class="alignleft">&laquo; <a href="http://perl6advent.wordpress.com/2010/12/03/day-3-file-operations/" rel="prev">Day 3 &#8211; File&nbsp;operations</a></div>
			<div class="alignright"><a href="http://perl6advent.wordpress.com/2010/12/05/why-perl-syntax-dwyw/" rel="next">Day 5 &#8211; Why Perl syntax does what you&nbsp;want</a> &raquo;</div>
		</div>

		<div class="post-456 post type-post status-publish format-standard hentry category-2010 tag-operators clear" id="post-456">
						<h2>Day 4 &#8211; The Sequence&nbsp;Operators</h2>
			<small class="single-by"><span class="by-author"><span class="sep">by</span> <span class="author vcard"><a class="url fn n" href="http://perl6advent.wordpress.com/author/colomon/" title="View all posts by colomon" rel="author">colomon</a></span> </span></small>

			<div class="entry">
				<p>Last year, there was a <a href="http://perl6advent.wordpress.com/2009/12/23/day-23-lazy-fruits-from-the-gather-of-eden/">brief tease</a> of the sequence operator (tweaked slightly to be correct after a year&#8217;s worth of changes to the spec):<br />
<pre class="brush: plain; light: true;">
my @even-numbers  := 0, 2 ... *;    # arithmetic seq
my @odd-numbers   := 1, 3 ... *;
my @powers-of-two := 1, 2, 4 ... *; # geometric seq
</pre><br />
This now works in Rakudo:<br />
<pre class="brush: plain; light: true;">
&gt; my @powers-of-two := 1, 2, 4 ... *; 1;
1
&gt; @powers-of-two[^10]
1 2 4 8 16 32 64 128 256 512
</pre><br />
(Note: All the code examples in this post have been run in Rakudo&#8217;s REPL, which you can reach by running the perl6 executable with no command line arguments.  Lines that start with &gt; I what I typed; the other lines are Rakudo&#8217;s response, which is generally the value of the last expression in the line.  Because the variable <code>@powers-of-two</code> is an infinite lazy list, I&#8217;ve added <code>1;</code> at the end of the line, so the REPL prints that instead of going into an infinite loop.)</p>
<p>We need to trim the infinite list so that Rakudo doesn&#8217;t spend an infinitely long time calculating it.  In this case, I used <code>[^10]</code>, which is a quick way of saying &#8220;Give me the first ten elements.&#8221;  (Note that when you bind a lazy list to an array variable like this, values which have been calculated are remembered; it&#8217;s a quick form of <a href="http://justrakudoit.wordpress.com/2010/08/28/the-serial-operator-and-memoization/">memoization</a>.)</p>
<p>The sequence operator <code>...</code> is a very powerful tool for generating lazy lists.  The above examples just start to hint at what it can do.  Given one number, it just starts counting up from that number (unless the terminal end of the sequence is a lower number, in which case it counts down).  Given two numbers to start a sequence, it will treat it as an arithmetic sequence, adding the difference between those first two numbers to the last number generated to generate the next one.  Given three numbers, it checks to see if they represent the start of an arithmetic or a geometric sequence, and will continue it.</p>
<p>Of course, many interesting sequences are neither arithmetic nor geometric, in which case you need to explicitly provide the sub to generate the next number in the sequence:<br />
<pre class="brush: plain; light: true;">
&gt; my @Fibonacci := 0, 1, -&gt; $a, $b { $a + $b } ... *; 1;
1
&gt; @Fibonacci[^10]
0 1 1 2 3 5 8 13 21 34
</pre><br />
The <code>-&gt; $a, $b { $a + $b }</code> there is a pointy block (ie a lambda function) which takes two arguments and returns their sum.  The sequence operator figures out how many arguments the block takes, and passes the needed arguments from the end of the sequence so far to generate the next number in the sequence.  And so on, forever.</p>
<p>Or not forever.  So far all these examples have had the <a href="http://perl6advent.wordpress.com/2009/12/19/day-19-whatever/">Whatever</a> star on the right hand side, which means &#8220;There is no terminating condition.&#8221;  If you instead have a number there, the list will terminate when that number is exactly reached.<br />
<pre class="brush: plain; light: true;">
&gt; 1, 1.1 ... 2
1 1.1 1.2 1.3 1.4 1.5 1.6 1.7 1.8 1.9 2
&gt; 1, 1.1 ... 2.01
... Rakudo spins its wheels, because this is an infinite list ...
&gt; (1, 1.1 ... 2.01)[^14]
1 1.1 1.2 1.3 1.4 1.5 1.6 1.7 1.8 1.9 2 2.1 2.2 2.3
</pre><br />
The first one of those terminates naturally, but the second one missed the terminator and kept right on going.  The result is an infinite list, so I limited it to the first 14 elements so that we could see what it was doing.</p>
<p>Those of you with backgrounds doing floating point math are probably sputtering about the dangers of assuming that adding .1 repeatedly will add up to exactly 2.  In Perl 6, that&#8217;s not quite such an issue because it will use Rat (ie fractional) math where possible.  But the general point is still very solid.  If I want to find all the Fibonacci numbers below 10000, needing to know exactly the number to stop on is a big hassle.  Luckily, just as you can use a block to specify how to generate the next element in a sequence, you can also use one to test to see whether the sequence should end yet:<br />
<pre class="brush: plain; light: true;">
&gt; 0, 1, -&gt; $a, $b { $a + $b } ... -&gt; $a { $a &gt; 10000 };
0 1 1 2 3 5 8 13 21 34 55 89 144 233 377 610 987 1597 2584 4181 6765 10946
</pre><br />
The pointy block <code>-&gt; $a { $a &gt; 10000 }</code> creates a block which takes one argument, and returns true when that argument is greater than 10000; just the test we want.</p>
<p>Except we were looking for all the Fibonacci less than 10000.  We generated that plus the first Fibonacci number greater than 10000.  When passed a block as a termination test, the sequence operator returns all its elements until that block returns true, then it returns that last element and stops.  But there is alternative form of the sequence operator that will do the trick:<br />
<pre class="brush: plain; light: true;">
&gt; 0, 1, -&gt; $a, $b { $a + $b } ...^ -&gt; $a { $a &gt; 10000 };
0 1 1 2 3 5 8 13 21 34 55 89 144 233 377 610 987 1597 2584 4181 6765
</pre><br />
Switching from <code>...</code> to <code>...^</code> means the resulting list does not include the first element for which the termination test returned true.</p>
<p>Two side notes on this.  This is actually a long-winded way of specifying these sequences in Perl 6.  I don&#8217;t have space to explain Whatever Closures here, but <a href="http://perl6advent.wordpress.com/2009/12/19/day-19-whatever/">this post</a> from last year talks about them.  Using them, you can rewrite that last sequence as<br />
<pre class="brush: plain; light: true;">
&gt; 0, 1, * + * ...^ * &gt; 10000;
0 1 1 2 3 5 8 13 21 34 55 89 144 233 377 610 987 1597 2584 4181 6765
</pre><br />
It&#8217;s up to you whether or not you think this is clearer; there&#8217;s more than one way to do it.</p>
<p>Also, the left-hand-side of the sequence operator can be any list, even lazy ones.  This means you can easily use a terminating block to get a limited portion of an existing lazy list:<br />
<pre class="brush: plain; light: true;">
&gt; my @Fibonacci := 0, 1, * + * ... *; 1;
1
&gt; @Fibonacci ...^ * &gt; 10000
0 1 1 2 3 5 8 13 21 34 55 89 144 233 377 610 987 1597 2584 4181 6765
&gt; @Fibonacci[30]
832040
</pre><br />
(I stuck the last check there just to demonstrate that <code>@Fibonacci</code> still goes on past 10000.)</p>
<p>This only begins to scratch the surface of what sequences can do.  For more information, see <a href="http://perlcabal.org/syn/S03.html#List_infix_precedence">&#8220;List infix precedence&#8221;</a> in the spec, and scroll down to the sequence operator.  (Though note that it is still not completely implemented!  It is an extremely complex operator.)</p>
<p>One particular twist I&#8217;d like to leave you with: the sequence operator is not constrained to working with numeric values.  If you explicitly specify your own generator, you can make a sequence out of any type at all.  But I&#8217;d like to leave that for a future Advent present&#8230;</p>

<div  class="wpadvert" style="text-align: center; padding: 5px; background: #; padding: 5px; margin: 10px auto; width: 410px;">
<!-- <span style="text-align: left; letter-spacing: 1px; font: 8px/1em Verdana, sans-serif; color: #ccc; text-transform: uppercase; display: block; padding: 0 1px;">Advertisement</span> -->
<script type="text/javascript">
GA_googleAddAttr("AdOpt", "1");
GA_googleAddAttr("Origin", "other");
GA_googleAddAttr("theme_bg", "ffffff"); 
GA_googleAddAttr("theme_text", "333333"); 
GA_googleAddAttr("theme_link", "0066cc"); 
GA_googleAddAttr("theme_border", "f9f9f9"); 
GA_googleAddAttr("theme_url", "114477"); 
GA_googleAddAttr("LangId", "1");
GA_googleAddAttr("Autotag", "science");
GA_googleAddAttr("Tag", "2010");
GA_googleAddAttr("Tag", "operators");

GA_googleFillSlot("wpcom_sharethrough");
</script>
</div><div class="sharedaddy sd-like-enabled"><div id="wpl-likebox" class="sd-block sd-like"><h3 class="sd-title">Like this:</h3><div class="sd-content"><div id="wpl-button"><a href='http://perl6advent.wordpress.com/2010/12/04/the-sequence-operator/?like=1&amp;_wpnonce=762128a6f3' title='I like this post' class='like needs-login sd-button' rel='nofollow'><span>Like</span></a></div><div id="wpl-count" class="sd-like-count">Be the first to like this post.</div></div></div></div>
								<p class="clear">Tags: <a href="http://perl6advent.wordpress.com/tag/operators/" rel="tag">operators</a></p>
				<p class="postmetadata alt">
					<small>
												This entry was posted on December 4, 2010 at 8:00 pm and is filed under <a href="http://perl6advent.wordpress.com/category/2010/" title="View all posts in 2010" rel="category tag">2010</a>.						You can follow any responses to this entry through the <a href='http://perl6advent.wordpress.com/2010/12/04/the-sequence-operator/feed/'>RSS 2.0</a> feed.
													You can <a href="#respond">leave a response</a>, or <a href="http://perl6advent.wordpress.com/2010/12/04/the-sequence-operator/trackback/" rel="trackback">trackback</a> from your own site.
						
					</small>
				</p>

			</div>
					</div>

	
<!-- You can start editing here. -->
	<h3 id="comments">2 Responses to &#8220;Day 4 &#8211; The Sequence&nbsp;Operators&#8221;</h3>

	<ol class="commentlist">
					<li class="comment even thread-even depth-1 highlander-comment" id="comment-897">
			<img alt='' src='http://0.gravatar.com/avatar/6a9353188f96dce805f9db93d61bff25?s=32&amp;d=identicon&amp;r=G' class='avatar avatar-32' height='32' width='32' />			<cite>Joe</cite> Says:						<br />

			<small class="commentmetadata"><a href="#comment-897" title="">August 26, 2011 at 3:40 am</a> | <a class='comment-reply-link' href='/2010/12/04/the-sequence-operator/?replytocom=897#respond' onclick='return addComment.moveForm("comment-897", "897", "respond", "456")'>Reply</a> </small>

			<p>&gt; my @Fibonacci := 0, 1, -&gt; $a, $b { $a + $b } &#8230; *;<br />
&gt;  @Fibonacci[^100]<br />
0 1 1 2 3 5 8 13 21 34 55 89 144 233 377 610 987 1597 2584 4181 6765 10946 17711 28657 46368 75025 121393 196418 317811 514229 832040 1346269 2178309 3524578 5702887 9227465 14930352 24157817 39088169 63245986 102334155 165580141 267914296 433494437 701408733 1134903170 1836311903 2971215073 4807526976 7778742049 12586269025 20365011074 32951280099 53316291173 86267571272 139583862445 225851433717 365435296162 591286729879 956722026041 1548008755920 2504730781961 4052739537881 6557470319842 10610209857723 17167680177565 27777890035288 44945570212853 72723460248141 117669030460994 190392490709135 308061521170129 498454011879264 806515533049393 1304969544928657 2111485077978050 3416454622906707 5527939700884757 8944394323791464 14472334024676221 23416728348467685 37889062373143906 61305790721611591 99194853094755497 160500643816367088 259695496911122585 420196140727489673 679891637638612258 1100087778366101931 1779979416004714189 2880067194370816120 4660046610375530309 7540113804746346429 -6246583658587674878 1293530146158671551 -4953053512429003327 -3659523366270331776 -8612576878699335103 6174643828739884737 -2437933049959450366<br />
&gt; </p>
<p>Is it a bug or something ? Negative value</p>
<ul class='children'>
			<li class="comment byuser comment-author-colomon bypostauthor odd alt depth-2 highlander-comment" id="comment-899">
			<img alt='' src='http://1.gravatar.com/avatar/3bfeb633907f64a75fb2db415eb13370?s=32&amp;d=identicon&amp;r=G' class='avatar avatar-32' height='32' width='32' />			<cite><a href='http://perl6advent.wordpress.com' rel='external nofollow' class='url'>colomon</a></cite> Says:						<br />

			<small class="commentmetadata"><a href="#comment-899" title="">August 26, 2011 at 11:27 am</a> | <a class='comment-reply-link' href='/2010/12/04/the-sequence-operator/?replytocom=899#respond' onclick='return addComment.moveForm("comment-899", "899", "respond", "456")'>Reply</a> </small>

			<p>I&#8217;m presuming that&#8217;s in Rakudo nom, right?  (Just tested both versions to see which one duplicates the issue.)  It looks like nom is still limited to 64-bit Ints, and overflows the Int value rather than switching to a Num (which is what Rakudo master does).  So it is indeed a bug, or at least an unimplemented feature.</p>
<p>If you use Niecza, which is the only current p6 implementation to properly support unbounded Ints, it gives you the correct value of 218922995834555169026 for @Fibonacci[100].</p>
</li>
</ul>
</li>
	
	</ol>

	<div class="navigation">
		<div class="alignleft"></div>
		<div class="alignright"></div>
	</div>

 


								<div id="respond">
				<h3 id="reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/2010/12/04/the-sequence-operator/#respond" style="display:none;">Cancel reply</a></small></h3>
									<form action="http://perl6advent.wordpress.com/wp-comments-post.php" method="post" id="commentform">
																										


												
<input type="hidden" name="hc_post_as" id="hc_post_as" value="guest" />

<div class="comment-form-field comment-textarea">
	<label for="comment">Enter your comment here...</label>
	<div id="comment-form-comment"><textarea id="comment" name="comment"></textarea></div>
</div>

<div id="comment-form-identity">

	<div id="comment-form-nascar">
		<p>Fill in your details below or click an icon to log in:</p>
		<ul>
			<li class="selected" style="display:none;">
				<a href="#comment-form-guest" id="postas-guest" title="Guest">
					<span></span>
				</a>
			</li>
			<li>
				<a href="#comment-form-wordpress" id="postas-wordpress" title="WordPress.com">
					<span></span>
				</a>
			</li>
			<li>
				<a href="#comment-form-load-service:Twitter" id="postas-twitter" title="Twitter">
					<span></span>
				</a>
			</li>
			<li>
				<a href="#comment-form-load-service:Facebook" id="postas-facebook" title="Facebook">
					<span></span>
				</a>
			</li>
		</ul>
	</div>

	<div id="comment-form-guest" class="comment-form-service selected">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="http://www.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=25&d=mm" alt="Gravatar" width="25" class="no-grav" />
			</div>

				<div class="comment-form-fields">
				<div class="comment-form-field comment-form-email">
					<label for="email">Email <span class="required">(required)</span> <span class="nopublish">(Not published)</span></label>
					<div class="comment-form-input"><input id="email" name="email" type="text" value="" /></div>
				</div>
				<div class="comment-form-field comment-form-author">
					<label for="author">Name <span class="required">(required)</span></label>
					<div class="comment-form-input"><input id="author" name="author" type="text" value="" /></div>
				</div>
				<div class="comment-form-field comment-form-url">
					<label for="url">Website</label>
					<div class="comment-form-input"><input id="url" name="url" type="text" value="" /></div>
				</div> 
			</div>
	
		</div>
	</div>

	<div id="comment-form-wordpress" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="http://s2.wp.com/wp-content/mu-plugins/highlander-comments/images/wplogo.png?m=1305292938g" alt="WordPress.com Logo" width="25" class="no-grav" />
			</div>

				<div class="comment-form-fields">
					<p id="wordpress-login-first">Please log in to WordPress.com to post a comment to your blog.</p>
				<iframe id="wordpress-login-iframe" data-srcurl="http://perl6advent.wordpress.com/wp-login.php?redirect_to=http%3A%2F%2Fperl6advent.wordpress.com%2Fhighlander.login%2F&#038;action=highlander-login&#038;skin=light"></iframe>
				</div>
	
		</div>
	</div>

	<div id="comment-form-twitter" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="http://www.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=25&d=mm" alt="Twitter picture" width="25" class="no-grav" />
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="twitter_avatar" id="twitter-avatar" class="comment-meta-twitter" value="" />
				<input type="hidden" name="twitter_user_id" id="twitter-user_id" class="comment-meta-twitter" value="" />
				<input type="hidden" name="twitter_access_token" id="twitter-access_token" class="comment-meta-twitter" value="" />
				<p class="comment-form-posting-as pa-twitter"><strong></strong> You are commenting using your Twitter account. <span class="comment-form-log-out">(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( 'twitter' );">Log&nbsp;Out</a>&nbsp;/&nbsp;<a href="#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)</span></p>
			</div>
	
		</div>
	</div>

	<div id="comment-form-facebook" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="http://www.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=25&d=mm" alt="Facebook photo" width="25" class="no-grav" />
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="fb_avatar" id="facebook-avatar" class="comment-meta-facebook" value="" />
				<input type="hidden" name="fb_user_id" id="facebook-user_id" class="comment-meta-facebook" value="" />
				<input type="hidden" name="fb_access_token" id="facebook-access_token" class="comment-meta-facebook" value="" />
				<p class="comment-form-posting-as pa-facebook"><strong></strong> You are commenting using your Facebook account. <span class="comment-form-log-out">(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( 'facebook' );">Log&nbsp;Out</a>&nbsp;/&nbsp;<a href="#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)</span></p>
			</div>
	
		</div>
	</div>


	<div id="comment-form-load-service" class="comment-form-service"> 
		<div class="comment-form-posting-as-cancel"><a href="javascript:HighlanderComments.cancelExternalWindow();">Cancel</a></div>
		<p>Connecting to %s</p> 
	</div>
	
	
</div>


<div id="comment-form-subscribe"> 
<p class="comment-subscription-form"><input type="checkbox" name="subscribe" id="subscribe" value="subscribe" style="width: auto;" tabindex="6"/> <label class="subscribe-label" id="subscribe-label" for="subscribe">Notify me of follow-up comments via email.</label></p></div>

	<script type="text/javascript">
	jQuery(document).ready(function(){
		HighlanderComments.comment_registration = '';
		HighlanderComments.userIsLoggedIn = false;
			});
	</script>
												<p class="form-submit">
							<input name="submit" type="submit" id="comment-submit" value="Post Comment" />
							<input type='hidden' name='comment_post_ID' value='456' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
						</p>
						
<input type="hidden" name="genseq" value="1323709585" />
<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="0c21c39290" /></p><script type='text/javascript' src='http://s1.wp.com/wp-content/mu-plugins/akismet-2.5/form.js?m=1308783981g&#038;ver=1'></script>
<p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="39"/></p>					</form>
							</div><!-- #respond -->
			<div style="clear: both"></div>			

	
	</div>


<hr />
<div id="footer">
	<p>
		Theme: <a href="http://theme.wordpress.com/themes/kubrick/">Kubrick</a>. <a href="http://wordpress.com/?ref=footer" rel="generator">Blog at WordPress.com</a>. 
		<br /><a href="http://perl6advent.wordpress.com/feed/">Entries (RSS)</a> and <a href="http://perl6advent.wordpress.com/comments/feed/">Comments (RSS)</a>.	</p>
</div>
</div>

<script type='text/javascript' src='http://s.gravatar.com/js/gprofiles.js?aa&#038;ver=MU'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='http://s0.wp.com/wp-content/mu-plugins/gravatar-hovercards/wpgroho.js?m=1318621575g&#038;ver=MU'></script>

<script type="text/javascript">
var _qevents = _qevents || [];
(function() {var elem = document.createElement('script');elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";elem.async = true;elem.type = "text/javascript";var scpt = document.getElementsByTagName('script')[0];scpt.parentNode.insertBefore(elem, scpt);  })();
_qevents.push( { qacct:"p-18-mFEk4J448M", labels:",language.en,type.wpcom,posttag.operators,as" } );
</script>
<noscript><div style="display: none;"><img src="//pixel.quantserve.com/pixel/p-18-mFEk4J448M.gif?labels=%2Clanguage.en%2Ctype.wpcom%2Cposttag.operators%2Cas" height="1" width="1" alt="" /></div></noscript>

	<script type="text/javascript">
	/* <![CDATA[ */
		jQuery(document).ready( function($) {
			
			$('#wpl-button > a.like').click( function(e) {
				e.preventDefault();
				
				$('#wpl-mustlogin').remove();
				
				$.post( 'http://perl6advent.wordpress.com/wp-admin/admin-ajax.php', { 
					'action': 'wpl_record_stat',
					'stat_name': 'loggedout_like_click'
				} );

				var tenMins = new Date();
				tenMins.setTime( tenMins.getTime() + 600000 );
				document.cookie = 'wpl_rand=45fa36c735; expires=' + tenMins.toGMTString() + '; domain=wordpress.com; path=/;';
				
				$('#wpl-count').after( '\
					<div id="wpl-mustlogin"> \
						<form action="https://perl6advent.wordpress.com/wp-login.php" method="post"> \
							<p>Just one more step to like this post:</p> \
							<label><span>Username</span> <input type="text" name="log" id="user_login" class="input" value="" size="20" tabindex="80" /></label> \
							<label><span>Password</span> <input type="password" name="pwd" id="user_pass" class="input" value="" size="20" tabindex="81" /></label> \
							<input type="submit" name="wp-submit" id="wp-submit" class="button-primary" value="Log In" tabindex="82" /> \
							<input type="hidden" name="redirect_to" value="http://perl6advent.wordpress.com/2010/12/04/the-sequence-operator/?like=1" /> \
							<input type="hidden" name="wpl_rand" value="45fa36c735" /> \
							<p>Not a member yet? <a href="http://wordpress.com/signup/?ref=likebox" id="wpl-signup-link">Sign up with WordPress.com</a></p> \
						</form> \
					</div> \
				');
				
				$('#wpl-mustlogin').hide().slideDown('fast');
			} );
			
			$('#wpl-mustlogin input.input').live( 'focus', function() {
				$(this).prev().hide();
			}).live( 'blur', function() {
				if ( $(this).val() == '' )
					$(this).prev().show();
			});
			
			$('#wpl-mustlogin input#wp-submit').live( 'click', function(e) {
				e.preventDefault();
				
				$.post( 'http://perl6advent.wordpress.com/wp-admin/admin-ajax.php', { 
					'action': 'wpl_record_stat',
					'stat_name': 'loggedout_login_submit'
				}, function() {
					$('#wpl-mustlogin form').submit();
				} );
			});			
			
			$('#wpl-mustlogin a#wpl-signup-link').live( 'click', function(e) {
				e.preventDefault();
				
				var link = $(this).attr('href');
				
				$.post( 'http://perl6advent.wordpress.com/wp-admin/admin-ajax.php', { 
					'action': 'wpl_record_stat',
					'stat_name': 'loggedout_signup_click'
				}, function() {
					location.href = link;
				} );
			});					
			
		});
	/* ]]> */
	</script>
<script>jQuery(document).ready(function($){ Gravatar.profile_cb = function( h, d ) { WPGroHo.syncProfileData( h, d );	}; Gravatar.my_hash = WPGroHo.my_hash; Gravatar.init( 'body', '#wpadminbar' ); });</script>	<div style="display:none">
	<div class="grofile-hash-map-6a9353188f96dce805f9db93d61bff25">
	</div>
	<div class="grofile-hash-map-3bfeb633907f64a75fb2db415eb13370">
	</div>
	</div>
		<style type="text/css">
			
				.reblog-from img                   { margin: 0 10px 0 0; vertical-align: middle; padding: 0; border: 0; }
				.reblogger-note img.avatar         { float: left; padding: 0; border: 0; }
				.reblogger-note-content            { margin: 0 0 20px 35px; }
				.reblog-post                       { border-left: 3px solid #eee; padding-left: 15px; }
				.reblog-post ul.thumb-list         { display: block; list-style: none; margin: 2px 0; padding: 0; clear: both; }
				.reblog-post ul.thumb-list li      { display: inline; margin: 0; padding: 0 1px; border: 0; }
				.reblog-post ul.thumb-list li a    { margin: 0; padding: 0; border: 0; }
				.reblog-post ul.thumb-list li img  { margin: 0; padding: 0; border: 0; }
				.reblog-post                       { border-left: 3px solid #eee; padding-left: 15px; }
					</style><script type='text/javascript'>
/* <![CDATA[ */
var HighlanderComments = {"loggingInText":"Logging In\u2026","submittingText":"Posting Comment\u2026","postCommentText":"Post Comment","connectingToText":"Connecting to %s","commentingAsText":"%1$s: You are commenting using your %2$s account.","logoutText":"Log Out","loginText":"Log In","connectURL":"http:\/\/perl6advent.wordpress.com\/public.api\/connect\/?action=request","homeURL":"http:\/\/perl6advent.wordpress.com\/","postID":"456","gravDefault":"identicon","enterACommentError":"Please enter a comment","enterEmailError":"Email address required","invalidEmailError":"Invalid email address","enterAuthorError":"Name required","gravatarFromEmail":"Your email address will be used to look up your Gravatar.","logInToExternalAccount":"Log in to use details from one of these accounts.","change":"Change","changeAccount":"Change Account"};
/* ]]> */
</script>
<script type='text/javascript' src='http://s1.wp.com/wp-content/mu-plugins/highlander-comments/script.js?m=1322513932g&#038;ver=20110804'></script>
	
	<div id="bit" class="loggedout-follow-normal">
		<a class="bsub" href="javascript:void(0)"><span id='bsub-text'>Follow</span></a>
		<div id="bitsubscribe">
			
					<h3><label for="loggedout-follow-field">Follow Perl 6 Advent Calendar</label></h3>
		
			<form action="http://subscribe.wordpress.com" method="post" accept-charset="utf-8" id="loggedout-follow">
			<p>Get every new post delivered to your Inbox.</p>

					
			
			<p><input type="text" name="email" style="width: 95%; padding: 1px 2px" value="Enter email address" onfocus='this.value=(this.value=="Enter email address") ? "" : this.value;' onblur='this.value=(this.value=="") ? "Enter email address" : this.value;'  id="loggedout-follow-field"/></p>

			<input type="hidden" name="action" value="subscribe"/>
			<input type="hidden" name="blog_id" value="10740073"/>
			<input type="hidden" name="source" value="http://perl6advent.wordpress.com/2010/12/04/the-sequence-operator/"/>
			<input type="hidden" name="sub-type" value="loggedout-follow"/>

			<input type="hidden" id="_wpnonce" name="_wpnonce" value="535b507c2f" /><input type="hidden" name="_wp_http_referer" value="/2010/12/04/the-sequence-operator/" />
			<p id='bsub-subscribe-button'><input type="submit" value="Sign me up!" /></p>
			</form>
					<div id='bsub-credit'><a href="http://wordpress.com/signup/?ref=lof">Powered by WordPress.com</a></div>
		</div><!-- #bitsubscribe -->
	</div><!-- #bit -->
<script type="text/javascript" src="http://b.scorecardresearch.com/beacon.js"></script><script type="text/javascript">try{COMSCORE.beacon({c1:2,c2:7518284});}catch(e){}</script><noscript><p class="robots-nocontent"><img src="http://b.scorecardresearch.com/p?cj=1c1=2&#038;c2=7518284" alt="" style="display:none" width="1" height="1" /></p></noscript><script type='text/javascript' src='http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/shCore.js?m=1305292940g&#038;ver=2.1.364b'></script>
<script type='text/javascript' src='http://s0.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/shBrushPlain.js?m=1305292940g&#038;ver=2.1.364b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var themecssurl = "http://s0.wp.com/wp-content/plugins/syntaxhighlighter-wpcom/shThemeDefault.css?m=1305292939g&amp;ver=2.1.364b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		document.getElementsByTagName("head")[0].appendChild(themecss);
	})();
	SyntaxHighlighter.config.clipboardSwf = 'http://s2.wp.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter/scripts/clipboard.swf?m=1305292940g';
	SyntaxHighlighter.config.strings.expandSource = 'show source';
	SyntaxHighlighter.config.strings.viewSource = 'view source';
	SyntaxHighlighter.config.strings.copyToClipboard = 'copy to clipboard';
	SyntaxHighlighter.config.strings.copyToClipboardConfirmation = 'The code is in your clipboard now';
	SyntaxHighlighter.config.strings.print = 'print';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.all();
</script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script><script src="http://s.stats.wordpress.com/w.js?21" type="text/javascript"></script>
<script type="text/javascript">
st_go({'blog':'10740073','v':'wpcom','user_id':'0','post':'456','subd':'perl6advent'});
ex_go({'crypt':'UE5XaGUuOTlwaD85flAmcm1mcmZsaDhkV11YdWFnNncxc1tjZG9XVXhReTFqanhKV3x0UkQxQldDVUV4ZVR+cSt8Ny8tTm40WHJCJm0yem40UEhxUkw4QyxOai11PS9zMEdMUmc2cnc1LC1MRHJiTjFWeGpoNThTT3RXUkEuY0Z+WW9sfDhrQnZxNlpERT1aMnQlSXxFP3k4cnJYcHdzLF1vJjBzV1ArV3wxdUx5ZEZqSHxnUnxdQX55OXBueFRmaXpNbDVBZVZMaCZfYzQsRXxMPz9ZZm1vakhGLVVoeGZ+XzdaW1t0QmNBRF1kUSY/'});
addLoadEvent(function(){linktracker_init('10740073',456);});
	</script>
<noscript><img src="http://stats.wordpress.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /></noscript>
</body>
</html>
